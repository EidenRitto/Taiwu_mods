# 梦中情人 DreamLover
## 用途 Usages

+ <font size=5>被爱</font>
  + 支持充分的条件**筛选**
  + 支持npc主动爱慕、表白与求婚
  + 雨恨云愁
+ <font size=5>欺辱</font>
  + 太吾过月时(作为npc)欺辱他人
  + 支持部分条件筛选
+ <font size=5>主动欺辱</font>
  + 需要安装txtmod
  + 支持指定参数
+ <font size=5>怀孕</font>
  + 指定（单方或双方）生育能力
  + 指定怀孕概率和异胎概率
+ <font size=5>防绿</font>
  + 防止特定人群的配偶出轨

## 更新日志 Updates
### 1.0.0
 游戏的梦境中人仅仅加魅力，并不能算是真的大众心中的梦中情人。
因此制作了这个mod。

mod 效果：
在太吾成年后(14岁)，
和太吾处于同一格子的人，只要与太吾有过一面之缘的成年人，都会爱慕太吾传人。
如果已经处于爱慕关系，并且太吾也爱慕ta，则对方会尝试主动请求恋爱。
如果已经处于恋爱关系，且你们双方未婚，则对方会尝试主动求婚。

由于游戏的事件系统有点复杂，所以爱慕是必然发生的，而对方的主动请求<del>必须是对方闲下来的时候才会请求，所以</del>是概率发生的(概率大概 20%+)。

### 1.0.1
增加了一些可定制选项。

必须要处于两情相悦状态才会发生求婚。

接受的关系<del>通常不够伦理，比如勾选“亲生父母”，就可以让你的女儿发生回交</del>可以突破游戏的原有限制。

### 1.0.2
增加了人物阶层筛选功能。

修复了配置保存的BUG。

增加了可在不同格产生爱慕的选项(慎用)，可以用来变相举办自己的招亲大会 。

太吾传人可能会想要摆脱一群爱慕者，因此增添新功能——天涯何处无芳草,何必单恋一枝花。
在不勾选“主动爱慕”的时候出现的按钮，点击后会清除世界上所有太吾不爱慕的人物对太吾的爱慕之情。

### 1.0.3
整合了其他两个mod。
[MOD发布\] 情难自已 v1.0.0](https://nga.178.com/read.php?tid=20221567)
[MOD发布\] 一发入魂——指定怀孕概率 v1.0.0](https://nga.178.com/read.php?tid=20223722)

### 1.0.4

同时只能显示一种功能的页面，更符合逻辑。

新增debug模式，
在 The Scroll Of Taiwu\Mods\DreamLover\Settings.xml 中，翻到最后几行，就能看到\<debugmode\>。
默认为 false，如果设置为 true，则会显示完整日志(在umm界面和output_log.txt 都有，可以帮助纠错)
<del> (以及帮你知道你每次的各种判定结果是怎么发生的，包括防绿功能的完整记录) 

## 1.0.5

修复了 v1.0.4 的过月欺辱功能 BUG
开放 DebugMode
更新了防绿功能，目前是开启后，**符合条件**的人不能与太吾之外的**任何人**发生关系。

雨恨云愁功能更改为选中后，单恋太吾的人过月时发生 雨恨云愁 事件(忘记对太吾的感情)。
新版本的配置文件与之前版本不兼容，需要重新设置各种选项。

v1.0.5 以前，如果想要在与人物的互动中主动欺辱，可以安装附件的“发生关系”mod，然后使用基础资源框架加载 txtmod。
v1.0.5 内置发生关系，只需要加载 txtmod 即可。

具体使用或者自己想要当个带文豪自己创作小h文可以参考下面这个帖子的最后一部分。
[[抛砖引玉\] [txtmod] 自定义事件流程教程与修改实例(伏魔救治与主动欺辱)](https://nga.178.com/read.php?tid=20361579)

***2020-02-28 16:29***
修复了 v1.0.5 的“当人物无姓名数据时，主动欺辱报错”的BUG。

***2020-02-28 22:26***
此 MOD 功能基本完成，此后将不会做大的更新。

### 1.0.6

各功能模块动态加载，使过月速度变得正常。

感谢  [[@零下萝莉\]](https://nga.178.com/nuke.php?func=ucp&__inchst=UTF-8&username=零下萝莉)  的帮助。

<details>
<summary>详情与一些自言自语</summary>
如果不需要某个功能，可以直接关掉，从而消除某个功能模块对过月速度的影响。<br/>
特别的，互动中的欺辱效果是常态存在的，不能关闭(除非关闭整个mod)<br/>
当需要某个模块的功能被全部关闭的时候，对应的模块会被卸载。<br/>
可以在 debug 模式下观察到加载、卸载模块的日志。<br/>
理论上不会再有下一次更新了<del>，除非有BUG或者其他有趣想法<br/>
毕竟这个mod本身就是一时兴起的产物<br/>
phorcys大佬太强了，浮动信息就是逐模块动态加载。<br/>
或许以后会考虑把互动欺辱的 txtmod 整合进来<br/>
或许以后会考虑添加更多的互动事件(例如主动 ML)(但是现在的关掉结仇和心情就是主动ML啊)(关掉日志？)<br/>
我就是画饼大师(虽然已经摸了，估计出现 BUG 的时候才会考虑继续更)</del><br/>
</details>

### 1.0.7

武当更新了，正好更新一下mod，修一些陈年BUG，以及圆以前画的几个饼。

+ 修复了防绿功能的BUG<del>之前代码逻辑出错了，与其说防绿不如说防止太吾子嗣出轨</del>
+ 增加了强制发生求婚等事件的选项(强制将求婚、表白事件放到每月的首个事件)
+ 支持指定父母单方面的生育能力
+ 欺辱选项中，新增是否保留记录<del>，使其对纯爱党更友好</del>
+ 调整了debug模式的日志，使其更加易读





## 杂项

### 主动欺辱

该模块作用是添加了一个 EndEvent。(*END&90011&11*，与对方强行发生关系)
其可以接受五个额外参数，分别表示是否跳过战力检定，是否影响双方情绪，是否可能结仇，孩子是否单亲以及是否无日志，0 表示否，1 表示是。
如果忽略，则默认为 *0, 1, 1, 1, 0*。(游戏内的欺辱事件设定)
例如，*END&90011&11&1&0&0&0*，表示必然成功，不影响情绪，不结仇并且孩子有双亲。

下面的是一个示例，可以直接复制保存作为txtmod。

```bash
#,0,1,2,3,4,5,6,7,8,9,10,11

9005,敌对类互动,0,0,,1,900500006|900500001|900500002|900500003|900500004|900500005|900500007,,,,0,,0

900500007,,,-1,（欺辱……）,1,,TIME&5|GN&4,917600002,,0,,0
917600002,确定欺辱,0,-99,MN看着D0的姣好相貌，愈发不能自己……,1,917600003|900700001,,,,0,,0
917600003,,,-1,（强行欺辱……）<color=#4B4B4BFF>（消耗行动力：5）</color>,1,,TIME&5,917600004,TIME&5|END&90011&11&0&1&1&0,0,,0
917600004,欺辱对方,0,0,MN趁D0不备，强行与其发生了关系。,1,917600005,,,,0,,0
917600005,,,-1,（喜不自胜……）,1,,,-1,,0,,0
```

### 更新地址

[个人项目页面](https://github.com/RedContritio/Taiwu_mods)（只有源码，更新最快应该是）

[太吾绘卷游戏Mod](https://github.com/phorcys/Taiwu_mods)（主分支，每次大更新都会重新编译，推荐）